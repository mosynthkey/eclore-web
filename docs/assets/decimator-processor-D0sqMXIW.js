var c=Object.defineProperty;var d=(e,s,t)=>s in e?c(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var o=(e,s,t)=>d(e,typeof s!="symbol"?s+"":s,t);class f extends AudioWorkletProcessor{constructor(){super();o(this,"bits",16);o(this,"rate",.2);o(this,"lastSample",0);o(this,"skipCounter",0);this.port.onmessage=t=>{t.data.type==="setBits"?this.bits=t.data.value:t.data.type==="setRate"&&(this.rate=t.data.value)}}process(t,p){const i=t[0],u=p[0];for(let r=0;r<i.length;r++){const n=i[r],h=u[r];for(let a=0;a<n.length;a++){if(this.skipCounter<=0){const l=2**(this.bits-1);this.lastSample=Math.round(n[a]*l)/l,this.skipCounter=Math.floor(1/this.rate)}else this.skipCounter--;h[a]=this.lastSample}}return!0}}registerProcessor("decimator-processor",f);
